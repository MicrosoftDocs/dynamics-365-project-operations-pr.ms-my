---
title: Segerakkan kontrak projek dan projek secara terus daripada Project Service Automation kepada Finance and Operations
description: Topik ini menghuraikan templat dan tugas asas yang digunakan untuk menyegerakkan kontrak projek dan projek secara terus daripada Microsoft Dynamics 365 Project Service Automation kepada Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 9e4f11ec0bb88ed0971a3d082e7ca7823fcf8453
ms.sourcegitcommit: 5c4c9bf3ba018562d6cb3443c01d550489c415fa
ms.translationtype: HT
ms.contentlocale: ms-MY
ms.lasthandoff: 10/16/2020
ms.locfileid: "4081362"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="feaf6-103">Segerakkan kontrak projek dan projek secara terus daripada Project Service Automation kepada Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="feaf6-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="feaf6-104">Topik ini menghuraikan templat dan tugas asas yang digunakan untuk menyegerakkan kontrak projek dan projek secara terus daripada Dynamics 365 Project Service Automation kepada Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="feaf6-105">Jika anda menggunakan Enterprise Edition 7.3.0, anda mesti memasang KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="feaf6-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="feaf6-106">Aliran data untuk Project Service Automation kepada Finance</span><span class="sxs-lookup"><span data-stu-id="feaf6-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="feaf6-107">Sebelum anda menggunakan penyelesaian integrasi Project Service Automation kepada Finance, anda harus membiasakan diri dengan ciri integrasi Data Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="feaf6-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="feaf6-108">Penyelesaian integrasi Project Service Automation kepada Finance menggunakan ciri integrasi Data untuk menyegerakkan data merentasi tika Project Service Automation dan Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="feaf6-109">Templat integrasi yang tersedia dengan ciri integrasi Data mendayakan aliran data tentang kontrak projek, projek, baris kontrak projek dan pencapaian baris kontrak projek daripada Project Service Automation kepada Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="feaf6-110">Ilustrasi berikut menunjukkan cara data disegerakkan antara Project Service Automation dan Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="feaf6-111">[![Aliran data untuk integrasi Project Service Automation dengan Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="feaf6-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="feaf6-112">Templat dan tugas</span><span class="sxs-lookup"><span data-stu-id="feaf6-112">Templates and tasks</span></span>

<span data-ttu-id="feaf6-113">Untuk mengakses templat yang tersedia, dalam pusat pentadbiran Microsoft Power Apps, pilih **Projek** dan kemudian, di sudut kanan atas, pilih **Projek baharu** untuk memilih templat awam.</span><span class="sxs-lookup"><span data-stu-id="feaf6-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects** , and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="feaf6-114">Templat dan tugas asas yang berikut digunakan untuk menyegerakkan kontrak projek dan projek daripada Project Service Automation kepada Finance:</span><span class="sxs-lookup"><span data-stu-id="feaf6-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="feaf6-115">Berintegrasi dengan Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="feaf6-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="feaf6-116">**Nama templat dalam integrasi Data:** Projek dan kontrak (PSA kepada Fin dan Ops)</span><span class="sxs-lookup"><span data-stu-id="feaf6-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="feaf6-117">**Nama tugas dalam projek:**</span><span class="sxs-lookup"><span data-stu-id="feaf6-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="feaf6-118">Kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-119">Projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-120">Baris kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-121">Pencapaian baris kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="feaf6-122">Berintegrasi dengan Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="feaf6-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="feaf6-123">Terdapat perubahan skema dalam Project Service Automation yang memberi kesan kepada templat pencapaian baris kontrak projek dan penggunaan versi V2 templat diperlukan untuk mengintegrasikan Project Service Automation v3.x dengan Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="feaf6-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="feaf6-124">**Nama templat dalam integrasi Data:** Projek dan Kontrak (PSA 3.x kepada Fin dan Ops) - v2</span><span class="sxs-lookup"><span data-stu-id="feaf6-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="feaf6-125">**Nama tugas dalam projek:**</span><span class="sxs-lookup"><span data-stu-id="feaf6-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="feaf6-126">Kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-127">Projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-128">Baris kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="feaf6-129">Pencapaian baris kontrak projek PSA kepada Fin dan Ops</span><span class="sxs-lookup"><span data-stu-id="feaf6-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="feaf6-130">Selepas penyegerakan kontrak projek dan projek boleh berlaku, anda mesti menyegerakkan akaun.</span><span class="sxs-lookup"><span data-stu-id="feaf6-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="feaf6-131">Set entiti</span><span class="sxs-lookup"><span data-stu-id="feaf6-131">Entity set</span></span>

| <span data-ttu-id="feaf6-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="feaf6-132">Project Service Automation</span></span>       | <span data-ttu-id="feaf6-133">Finance</span><span class="sxs-lookup"><span data-stu-id="feaf6-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="feaf6-134">Pesanan</span><span class="sxs-lookup"><span data-stu-id="feaf6-134">Orders</span></span>                           | <span data-ttu-id="feaf6-135">Entiti integrasi untuk kontrak projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="feaf6-136">Projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-136">Projects</span></span>                         | <span data-ttu-id="feaf6-137">Entiti integrasi untuk projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="feaf6-138">Baris pesanan</span><span class="sxs-lookup"><span data-stu-id="feaf6-138">Order lines</span></span>                      | <span data-ttu-id="feaf6-139">Entiti integrasi untuk baris kontrak projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="feaf6-140">Pencapaian baris kontrak projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-140">Project contract line milestones</span></span> | <span data-ttu-id="feaf6-141">Entiti integrasi untuk pencapaian baris kontrak projek</span><span class="sxs-lookup"><span data-stu-id="feaf6-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="feaf6-142">Aliran entiti</span><span class="sxs-lookup"><span data-stu-id="feaf6-142">Entity flow</span></span>

<span data-ttu-id="feaf6-143">Kontrak projek diuruskan dalam Project Service Automation dan disegerakkan kepada Finance sebagai kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="feaf6-144">Sebagai sebahagian daripada templat integrasi, anda boleh menetapkan sumber integrasi dalam Finance untuk kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="feaf6-145">Projek masa dan bahan serta projek harga Tetap diuruskan dalam Project Service Automation dan disegerakkan kepada Finance sebagai projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="feaf6-146">Sebagai sebahagian daripada integrasi templat, anda boleh menetapkan sumber integrasi dalam Finance untuk projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="feaf6-147">Baris kontrak projek diuruskan dalam Project Service Automation dan disegerakkan kepada Finance sebagai peraturan pengebilan kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="feaf6-148">Jika kaedah pengebilan berbeza daripada jenis projek lalai, penyegerakan mengemas kini jenis projek untuk projek baris kontrak dan kumpulan projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="feaf6-149">Pencapaian baris kontrak projek diuruskan dalam Project Service Automation dan disegerakkan kepada Finance sebagai pencapaian peraturan pengebilan kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="feaf6-150">Penyelesaian integrasi Project Service Automation kepada Finance</span><span class="sxs-lookup"><span data-stu-id="feaf6-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="feaf6-151">Medan **ID kontrak projek** tersedia di halaman **Kontrak projek**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="feaf6-152">Medan ini telah menghasilkan kunci unik dan natural untuk menyokong integrasi.</span><span class="sxs-lookup"><span data-stu-id="feaf6-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="feaf6-153">Apabila kontrak projek baharu dicipta, jika nilai **ID kontrak projek** tidak wujud, ia dijana secara automatik dengan menggunakan jujukan nombor.</span><span class="sxs-lookup"><span data-stu-id="feaf6-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="feaf6-154">Nilai ini terdiri daripada **ORD** diikuti oleh jujukan nombor yang menaik dan kemudian akhiran enam aksara.</span><span class="sxs-lookup"><span data-stu-id="feaf6-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="feaf6-155">Berikut ialah contoh: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="feaf6-156">Medan **Nombor Projek** tersedia di halaman **Projek**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="feaf6-157">Medan ini telah menghasilkan kunci unik dan natural untuk menyokong integrasi.</span><span class="sxs-lookup"><span data-stu-id="feaf6-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="feaf6-158">Apabila projek baharu dicipta, jika nilai **Nombor Projek** tidak wujud, ia dijana secara automatik dengan menggunakan jujukan nombor.</span><span class="sxs-lookup"><span data-stu-id="feaf6-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="feaf6-159">Nilai ini terdiri daripada **PRJ** diikuti oleh jujukan nombor yang menaik dan kemudian akhiran enam aksara.</span><span class="sxs-lookup"><span data-stu-id="feaf6-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="feaf6-160">Berikut ialah contoh: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="feaf6-161">Apabila penyelesaian integrasi Project Service Automation kepada Finance digunakan, skrip naik taraf menetapkan medan **ID kontrak projek** untuk kontrak projek sedia ada dan medan **Nombor Projek** untuk projek sedia ada dalam Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="feaf6-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="feaf6-162">Persediaan prasyarat dan pemetaan</span><span class="sxs-lookup"><span data-stu-id="feaf6-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="feaf6-163">Selepas penyegerakan kontrak projek dan projek boleh berlaku, anda mesti menyegerakkan akaun.</span><span class="sxs-lookup"><span data-stu-id="feaf6-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="feaf6-164">Dalam set sambungan anda, tambahkan pemetaan medan kunci integrasi untuk **msdyn\_organizationalunits** pada **msdyn\_nama \[Name\]**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="feaf6-165">Anda mungkin perlu menambahkan terlebih dahulu projek pada set sambungan.</span><span class="sxs-lookup"><span data-stu-id="feaf6-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="feaf6-166">Untuk maklumat lanjut, lihat [Integrasikan data ke dalam Common Data Service untuk Aplikasi](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="feaf6-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="feaf6-167">Dalam set sambungan anda, tambahkan pemetaan medan kunci integrasi untuk **msdyn\_projects** pada **msdynce\_projectnumber \[Project Number\]**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="feaf6-168">Anda mungkin perlu menambahkan terlebih dahulu projek pada set sambungan.</span><span class="sxs-lookup"><span data-stu-id="feaf6-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="feaf6-169">Untuk maklumat lanjut, lihat [Integrasikan data ke dalam Common Data Service untuk Aplikasi](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="feaf6-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="feaf6-170">**SourceDataID** untuk kontrak projek dan projek boleh dikemas kini kepada nilai yang berbeza atau dialih keluar daripada pemetaan.</span><span class="sxs-lookup"><span data-stu-id="feaf6-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="feaf6-171">Nilai templat lalai ialah **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="feaf6-172">Pemetaan **PaymentTerms** mesti dikemas kini supaya ia menunjukkan terma pembayaran yang sah dalam Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="feaf6-173">Anda juga boleh mengalih keluar pemetaan daripada tugas projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="feaf6-174">Peta nilai lalai mempunyai nilai lain untuk data demo.</span><span class="sxs-lookup"><span data-stu-id="feaf6-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="feaf6-175">Jadual yang berikut menunjukkan nilai dalam Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="feaf6-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="feaf6-176">Nilai</span><span class="sxs-lookup"><span data-stu-id="feaf6-176">Value</span></span> | <span data-ttu-id="feaf6-177">Penerangan</span><span class="sxs-lookup"><span data-stu-id="feaf6-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="feaf6-178">1</span><span class="sxs-lookup"><span data-stu-id="feaf6-178">1</span></span>     | <span data-ttu-id="feaf6-179">Bersih 30</span><span class="sxs-lookup"><span data-stu-id="feaf6-179">Net 30</span></span>        |
    | <span data-ttu-id="feaf6-180">2</span><span class="sxs-lookup"><span data-stu-id="feaf6-180">2</span></span>     | <span data-ttu-id="feaf6-181">2% 10, Bersih 30</span><span class="sxs-lookup"><span data-stu-id="feaf6-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="feaf6-182">3</span><span class="sxs-lookup"><span data-stu-id="feaf6-182">3</span></span>     | <span data-ttu-id="feaf6-183">Bersih 45</span><span class="sxs-lookup"><span data-stu-id="feaf6-183">Net 45</span></span>        |
    | <span data-ttu-id="feaf6-184">4</span><span class="sxs-lookup"><span data-stu-id="feaf6-184">4</span></span>     | <span data-ttu-id="feaf6-185">Bersih 60</span><span class="sxs-lookup"><span data-stu-id="feaf6-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="feaf6-186">Pertanyaan Kuasa</span><span class="sxs-lookup"><span data-stu-id="feaf6-186">Power Query</span></span>

<span data-ttu-id="feaf6-187">Anda mesti menggunakan Microsoft Power Query untuk Excel bagi menapis data jika syarat yang berikut dipenuhi:</span><span class="sxs-lookup"><span data-stu-id="feaf6-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="feaf6-188">Anda mempunyai pesanan jualan dalam Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="feaf6-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="feaf6-189">Anda mempunyai berbilang unit organisasi dalam Project Service Automation dan unit organisasi ini akan dipetakan kepada berbilang entiti sah dalam Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="feaf6-190">Jika anda mesti menggunakan Power Query, ikut garis panduan ini:</span><span class="sxs-lookup"><span data-stu-id="feaf6-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="feaf6-191">Templat Projek dan kontrak (PSA kepada Fin dan Ops) mempunyai penapis lalai yang mengandungi hanya pesanan jualan jenis **Item kerja (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="feaf6-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="feaf6-192">Penapis ini membantu menjamin bahawa kontrak projek tidak dicipta untuk pesanan jualan dalam Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="feaf6-193">Jika anda mencipta templat anda sendiri, anda mesti menambahkan penapis ini.</span><span class="sxs-lookup"><span data-stu-id="feaf6-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="feaf6-194">Anda mesti mencipta penapis Power Query yang mengandungi hanya organisasi kontrak yang perlu disegerakkan kepada entiti sah bagi set sambungan integrasi.</span><span class="sxs-lookup"><span data-stu-id="feaf6-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="feaf6-195">Contohnya, kontrak projek yang anda miliki dengan unit organisasi kontrak Contoso US perlu disegerakkan kepada entiti sah USSI tetapi kontrak projek yang anda miliki dengan unit organisasi kontrak Contoso Global perlu disegerakkan kepada entiti sah USMF.</span><span class="sxs-lookup"><span data-stu-id="feaf6-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="feaf6-196">Jika anda tidak menambahkan penapis ini pada pemetaan tugas anda, semua kontrak projek akan disegerakkan kepada entiti sah yang ditakrifkan untuk set sambungan, tanpa mengira unit organisasi kontrak.</span><span class="sxs-lookup"><span data-stu-id="feaf6-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="feaf6-197">Pemetaan tempat dalam integrasi Data</span><span class="sxs-lookup"><span data-stu-id="feaf6-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="feaf6-198">Medan **CustomerReference** , **AddressCity** , **AddressCountryRegionID** , **AddressDescription** , **AddressLine1** , **AddressLine2** , **AddressState** dan **AddressZipCode** tidak disertakan dalam pemetaan lalai untuk kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-198">The **CustomerReference** , **AddressCity** , **AddressCountryRegionID** , **AddressDescription** , **AddressLine1** , **AddressLine2** , **AddressState** , and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="feaf6-199">Anda boleh menambahkan pemetaan jika anda memerlukan data ini disegerakkan untuk kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="feaf6-200">Medan **Description** , **ParentID** , **ProjectGroup** , **ProjectManagerPersonnelNumber** dan **ProjectType** tidak disertakan dalam pemetaan lalai untuk projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-200">The **Description** , **ParentID** , **ProjectGroup** , **ProjectManagerPersonnelNumber** , and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="feaf6-201">Anda boleh menambahkan pemetaan jika anda memerlukan data ini disegerakkan untuk projek.</span><span class="sxs-lookup"><span data-stu-id="feaf6-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="feaf6-202">Ilustrasi yang berikut menunjukkan contoh pemetaan tugas templat dalam integrasi Data.</span><span class="sxs-lookup"><span data-stu-id="feaf6-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="feaf6-203">Pemetaan menunjukkan maklumat medan yang akan disegerakkan daripada Project Service Automation kepada Finance.</span><span class="sxs-lookup"><span data-stu-id="feaf6-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="feaf6-204">[![Pemetaan templat kontrak projek](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="feaf6-204">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="feaf6-205">[![Pemetaan templat projek](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="feaf6-205">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="feaf6-206">[![Pemetaan templat baris kontrak projek](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="feaf6-206">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="feaf6-207">[![Pemetaan templat pencapaian baris kontrak projek](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="feaf6-207">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="feaf6-208">Pemetaan pencapaian baris kontrak projek dalam templat Projek dan Kontrak (PSA 3.x kepada Dynamics) - v2:</span><span class="sxs-lookup"><span data-stu-id="feaf6-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="feaf6-209">[![Pemetaan pencapaian baris kontrak projek dengan templat dua versi](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="feaf6-209">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
