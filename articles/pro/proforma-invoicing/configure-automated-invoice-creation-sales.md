---
title: Sediakan penciptaan invois automatik
description: Topik ini memberikan maklumat tentang menyediakan dan mengkonfigurasikan penciptaan automatik invois proforma.
author: rumant
ms.date: 04/05/2021
ms.topic: article
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 2d212f2279b28d900e75d45386e343f95b8e825e
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ms-MY
ms.lasthandoff: 05/10/2021
ms.locfileid: "6004182"
---
# <a name="set-up-automatic-invoice-creation"></a><span data-ttu-id="98ee1-103">Sediakan penciptaan invois automatik</span><span class="sxs-lookup"><span data-stu-id="98ee1-103">Set up automatic invoice creation</span></span> 
 
<span data-ttu-id="98ee1-104">_**Gunakan Pada:** Pelaksanaan ringan - urusan untuk penginvoisan proforma, Project Operations untuk senario berdasarkan sumber/bukan stok_</span><span class="sxs-lookup"><span data-stu-id="98ee1-104">_**Applies To:** Lite deployment - deal to proforma invoicing, Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="98ee1-105">Anda boleh mengkonfigurasikan penciptaan invois dalam Dynamics 365 Project Operations.</span><span class="sxs-lookup"><span data-stu-id="98ee1-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="98ee1-106">Sistem mencipta invois draf proforma berdasarkan jadual invois untuk setiap kontrak projek dan baris kontrak.</span><span class="sxs-lookup"><span data-stu-id="98ee1-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="98ee1-107">Jadual invois dikonfigurasikan pada peringkat baris kontrak.</span><span class="sxs-lookup"><span data-stu-id="98ee1-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="98ee1-108">Setiap baris pada kontrak boleh mempunyai jadual invois yang berbeza, atau jadual invois yang sama boleh dimasukkan pada setiap baris kontrak.</span><span class="sxs-lookup"><span data-stu-id="98ee1-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="98ee1-109">Apabila anda mencipta invois, sistem sentiasa mencipta sekurang-kurangnya satu invois bagi setiap kontrak projek.</span><span class="sxs-lookup"><span data-stu-id="98ee1-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="98ee1-110">Dalam sesetengah kes, mungkin terdapat berbilang invois yang dicipta.</span><span class="sxs-lookup"><span data-stu-id="98ee1-110">In some cases, there may be multiple invoices created.</span></span> <span data-ttu-id="98ee1-111">Contohnya, jika kontrak mempunyai berbilang pelanggan, bilangan invois yang sama akan dicipta sebagai bilangan pelanggan yang mempunyai transaksi boleh dibilkan ke invois pada kontrak projek tersebut.</span><span class="sxs-lookup"><span data-stu-id="98ee1-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="98ee1-112">Memahami cara transaksi dimasukkan pada invois</span><span class="sxs-lookup"><span data-stu-id="98ee1-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="98ee1-113">Kadang kala, setiap baris kontrak berasaskan projek menentukan jadual invois yang berasingan.</span><span class="sxs-lookup"><span data-stu-id="98ee1-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="98ee1-114">Sebagai contoh, perkhidmatan pelaksanaan untuk kontrak Adatum mempunyai baris kontrak berikut:</span><span class="sxs-lookup"><span data-stu-id="98ee1-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="98ee1-115">Kerja prototaip iaitu harga tetap dengan dua pencapaian yang dicipta secara manual.</span><span class="sxs-lookup"><span data-stu-id="98ee1-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="98ee1-116">Kerja pelaksanaan yang termasuk Masa dan akan dibilkan dua minggu sekali pada hari Isnin.</span><span class="sxs-lookup"><span data-stu-id="98ee1-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="98ee1-117">Perbelanjaan ditanggung yang perlu dibilkan setiap bulan pada hari Isnin pertama setiap bulan.</span><span class="sxs-lookup"><span data-stu-id="98ee1-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="98ee1-118">Jadual invois ditakrifkan pada setiap dua item baris ini ini kelihatan seperti jadual berikut:</span><span class="sxs-lookup"><span data-stu-id="98ee1-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="98ee1-119">Baris kontrak</span><span class="sxs-lookup"><span data-stu-id="98ee1-119">Contract line</span></span> | <span data-ttu-id="98ee1-120">Tarikh jalanan invois</span><span class="sxs-lookup"><span data-stu-id="98ee1-120">Invoice run date</span></span> | <span data-ttu-id="98ee1-121">Tarikh penggalan transaksi</span><span class="sxs-lookup"><span data-stu-id="98ee1-121">Transaction cut-off date</span></span> | <span data-ttu-id="98ee1-122">Tarikh pencapaian</span><span class="sxs-lookup"><span data-stu-id="98ee1-122">Milestone date</span></span> | <span data-ttu-id="98ee1-123">Jumlah pencapaian</span><span class="sxs-lookup"><span data-stu-id="98ee1-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="98ee1-124">Kerja prototaip</span><span class="sxs-lookup"><span data-stu-id="98ee1-124">Prototype work</span></span> | <span data-ttu-id="98ee1-125">5 Oktober, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-125">October 5, Monday</span></span> | - | <span data-ttu-id="98ee1-126">5 Oktober, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-126">October 5, Monday</span></span> | <span data-ttu-id="98ee1-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="98ee1-127">5000 USD</span></span> |
| - | <span data-ttu-id="98ee1-128">3 November, Selasa</span><span class="sxs-lookup"><span data-stu-id="98ee1-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="98ee1-129">3 November, Selasa</span><span class="sxs-lookup"><span data-stu-id="98ee1-129">November 3, Tuesday</span></span> | <span data-ttu-id="98ee1-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="98ee1-130">12,000 USD</span></span> |
| <span data-ttu-id="98ee1-131">Kerja pelaksanaan</span><span class="sxs-lookup"><span data-stu-id="98ee1-131">Implementation work</span></span> | <span data-ttu-id="98ee1-132">5 Oktober, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-132">October 5, Monday</span></span> | <span data-ttu-id="98ee1-133">4 Oktober, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="98ee1-134">19 Oktober, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-134">October 19, Monday</span></span> | <span data-ttu-id="98ee1-135">18 Oktober, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="98ee1-136">2 November, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-136">November 2, Monday</span></span> | <span data-ttu-id="98ee1-137">1 November, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="98ee1-138">16 November, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-138">November 16, Monday</span></span> | <span data-ttu-id="98ee1-139">15 November, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="98ee1-140">Perbelanjaan yang ditanggung</span><span class="sxs-lookup"><span data-stu-id="98ee1-140">Expenses incurred</span></span> | <span data-ttu-id="98ee1-141">5 Oktober, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-141">October 5, Monday</span></span> | <span data-ttu-id="98ee1-142">4 Oktober, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="98ee1-143">2 November, Isnin</span><span class="sxs-lookup"><span data-stu-id="98ee1-143">November 2, Monday</span></span> | <span data-ttu-id="98ee1-144">1 November, Ahad</span><span class="sxs-lookup"><span data-stu-id="98ee1-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="98ee1-145">Dalam contoh ini apabila penginvoisan automatik berjalan pada:</span><span class="sxs-lookup"><span data-stu-id="98ee1-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="98ee1-146">**4 Oktober atau pada sebarang tarikh sebelum**: Tiada invois dijana untuk kontrak ini kerana jadual **Jadual Invois** untuk setiap baris kontrak ini tidak memanggil 4 Oktober, Ahad sebagai tarikh jalanan invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="98ee1-147">**5 Oktober Isnin**: Satu invois dijana untuk:</span><span class="sxs-lookup"><span data-stu-id="98ee1-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="98ee1-148">Kerja prototaip yang termasuk pencapaian, jika ia ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="98ee1-149">Kerja pelaksanaan yang merangkumi semua transaksi Masa yang dicipta sebelum tarikh tamat transaksi pada 4 Oktober, Ahad, yang ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="98ee1-150">Perbelanjaan yang ditanggung yang merangkumi semua transaksi Perbelanjaan yang dicipta sebelum tarikh tamat transaksi pada 4 Oktober, Ahad, yang ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="98ee1-151">**Pada 6 Oktober atau pada sebarang tarikh sebelum 19 Oktober**: Tiada invois dijana untuk kontrak ini oleh kerana jadual **Jadual Invois** untuk setiap baris kontrak ini tidak memanggil 6 Oktober sebagai tarikh sebelum 19 Oktober sebagai tarikh jalanan invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="98ee1-152">**19 Oktober, Isnin**: Satu invois dijana untuk kerja pelaksanaan yang merangkumi semua transaksi Masa yang dicipta sebelum tarikh tamat transaksi pada 18 Oktober, Ahad, yang ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="98ee1-153">**2 November Isnin**: Satu invois dijana untuk:</span><span class="sxs-lookup"><span data-stu-id="98ee1-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="98ee1-154">Kerja pelaksanaan yang merangkumi semua transaksi Masa yang dicipta sebelum tarikh tamat transaksi pada 1 November, Ahad, yang ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="98ee1-155">Perbelanjaan yang ditanggung yang merangkumi semua transaksi Perbelanjaan yang dicipta sebelum tarikh tamat transaksi pada 1 November, Ahad, yang ditandakan sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="98ee1-156">**3 November, Selasa**: Satu invois dijana untuk kerja prototaip yang termasuk pencapaian untuk 12000 USD, jika ia ditanda sebagai **Sedia untuk Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="98ee1-157">Konfigurasikan penginvoisan automatik</span><span class="sxs-lookup"><span data-stu-id="98ee1-157">Configure automatic invoicing</span></span>

<span data-ttu-id="98ee1-158">Lengkapkan langkah yang berikut untuk mengkonfigurasikan jalanan invois automatik.</span><span class="sxs-lookup"><span data-stu-id="98ee1-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="98ee1-159">Dalam **Operasi Projek**, pergi ke **Tetapan** > **Persediaan Invois Berulang**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="98ee1-160">Cipta kerja kelompok dan namakannya **Operasi Projek Mencipta Invois**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="98ee1-161">Nama kerja kelompok mesti termasuk perkataan terma "cipta invois".</span><span class="sxs-lookup"><span data-stu-id="98ee1-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="98ee1-162">Dalam medan **Jenis Kerja**, pilih **Tiada**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="98ee1-163">Secara lalai, medan **Kekerapan Harian** dan **Adalah Aktif** ditetapkan kepada **Ya**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="98ee1-164">Pilih **Jalankan Aliran Kerja**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-164">Select **Run Workflow**.</span></span> <span data-ttu-id="98ee1-165">Dalam kotak dialog **Cari Rekod**, anda akan melihat tiga aliran tugas:</span><span class="sxs-lookup"><span data-stu-id="98ee1-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="98ee1-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="98ee1-166">ProcessRunCaller</span></span>
- <span data-ttu-id="98ee1-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="98ee1-167">ProcessRunner</span></span>
- <span data-ttu-id="98ee1-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="98ee1-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="98ee1-169">Pilih **ProcessRunCaller**, kemudian pilih **Tambah**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="98ee1-170">Dalam kotak dialog seterusnya, pilih **OK**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="98ee1-171">Aliran tugas **Tidur** diikuti dengan aliran tugas **Proses**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="98ee1-172">Anda juga boleh memilih **ProcessRunner** dalam langkah 5.</span><span class="sxs-lookup"><span data-stu-id="98ee1-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="98ee1-173">Kemudian, apabila anda pilih **OK**, aliran tugas **Proses** diikuti oleh aliran kerja **Tidur**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="98ee1-174">Aliran kerja **ProcessRunCaller** dan **ProcessRunner** mencipta invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="98ee1-175">**ProcessRunCaller** memanggil **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="98ee1-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="98ee1-176">**ProcessRunner** ialah aliran kerja yang sebenarnya mencipta invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="98ee1-177">Aliran kerja merangkumi semua baris kontrak yang perlu dicipta invois, dan mencipta invois untuk baris tersebut.</span><span class="sxs-lookup"><span data-stu-id="98ee1-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="98ee1-178">Untuk menentukan baris kontrak yang perlu dicipta invois, kerja dilihat pada tarikh jalanan invois untuk baris kontrak.</span><span class="sxs-lookup"><span data-stu-id="98ee1-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="98ee1-179">Jika baris kontrak milik satu kontrak yang mempunyai tarikh jalanan invois sama, transaksi digabungkan ke dalam satu invois yang mempunyai dua baris invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="98ee1-180">Jika tiada transaksi untuk mencipta invois, kerja melangkau mencipta invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="98ee1-181">Selepas **ProcessRunner** selesai berjalan, ia memanggil **ProcessRunCaller**, memberikan masa akhir, dan ditutup.</span><span class="sxs-lookup"><span data-stu-id="98ee1-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="98ee1-182">**ProcessRunCaller** kemudian memulakan pemasa yang berjalan 24-jam dari tarikh akhir khusus.</span><span class="sxs-lookup"><span data-stu-id="98ee1-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="98ee1-183">Pada penghujung pemasa, **ProcessRunCaller** ditutup.</span><span class="sxs-lookup"><span data-stu-id="98ee1-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="98ee1-184">Kerja proses kelompok untuk mencipta invois adalah kerja berulang.</span><span class="sxs-lookup"><span data-stu-id="98ee1-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="98ee1-185">Jika proses kelompok ini berjalan banyak kali, berbilang tika kerja dicipta dan menyebabkan ralat.</span><span class="sxs-lookup"><span data-stu-id="98ee1-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="98ee1-186">Maka, anda perlu memulakan proses kelompol hanya satu kali, dan kemudian mulakan semula jika ia berhenti berjalan.</span><span class="sxs-lookup"><span data-stu-id="98ee1-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="98ee1-187">Penginvoisan kelompok dalam Project Operations hanya berjalan untuk baris kontrak projek yang dikonfigurasikan oleh jadual invois.</span><span class="sxs-lookup"><span data-stu-id="98ee1-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="98ee1-188">Baris kontrak dengan kaedah pengebilan harga tetap mesti mempunyai pencapaian yang dikonfigurasikan.</span><span class="sxs-lookup"><span data-stu-id="98ee1-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="98ee1-189">Baris kontrak projek dengan kaedah pengebilan masa dan bahan akan memerlukan persediaan jadual invois berdasarkan tarikh.</span><span class="sxs-lookup"><span data-stu-id="98ee1-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
